# .env
DB_USER=GSOC_Test
DB_PASSWORD=Westernuniongsoc@2025
DB_SERVER=SRVWUFRA0986V
DB_DATABASE=ACVSUJournal_00010027
DB_PORT=1433
PORT=3005




const sql = require('mssql');
require('dotenv').config();

const dbConfig = {
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  server: process.env.DB_SERVER,   // Must be a plain hostname
  database: process.env.DB_DATABASE,
  port: parseInt(process.env.DB_PORT, 10),
  options: {
    encrypt: true,
    trustServerCertificate: true,
  },
  pool: {
    max: 10,
    min: 0,
    idleTimeoutMillis: 30000
  }
};

console.log(`ðŸ” Connecting to DB_SERVER: ${process.env.DB_SERVER} port: ${process.env.DB_PORT}`);

const poolPromise = new sql.ConnectionPool(dbConfig)
  .connect()
  .then(pool => {
    console.log('âœ… MSSQL connected');
    return pool;
  })
  .catch(err => {
    console.error('âŒ MSSQL connection failed', err);
  });

module.exports = {
  sql,
  poolPromise
};









// src/config/db.js
require('dotenv').config();    // ensure .env is loaded
const sql = require('mssql');

// sanity check
if (!process.env.DB_SERVER) {
  console.error('âŒ ENV ERROR: DB_SERVER is undefined!');
  process.exit(1);
}
console.log('ðŸ” Connecting to DB_SERVER:', process.env.DB_SERVER, 'port:', process.env.DB_PORT);

const dbConfig = {
  user:     process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  server:   process.env.DB_SERVER,            // e.g. "SRVWUFRA0986V"
  port:     parseInt(process.env.DB_PORT, 10),// e.g. 1433
  database: process.env.DB_DATABASE,
  options: {
    encrypt: true,
    trustServerCertificate: true
  },
  pool: {
    max: 10,
    min: 0,
    idleTimeoutMillis: 30000
  }
};

const poolPromise = new sql.ConnectionPool(dbConfig)
  .connect()
  .then(pool => {
    console.log('âœ… MSSQL connected');
    return pool;
  })
  .catch(err => {
    console.error('âŒ MSSQL connection failed', err);
    process.exit(1);
  });

module.exports = {
  sql,
  poolPromise
};



  DB_USER=GSOC_Test
DB_PASSWORD=Westernuniongsoc@2025
DB_SERVER=SRVWUFRA0986V
DB_DATABASE=ACVSUJournal_00010027
DB_PORT=1433

PORT=3005








When i update above files we got beow error .i think you define SQLExpress but we are use mssql
check and so;lve the issue

PS C:\Users\W0024618\Desktop\emea-occupancy-backend> node server.js
ðŸ” Connecting to DB_SERVER: SRVWUFRA0986V
ðŸš€ Server running on port 3005
âŒ MSSQL connection failed ConnectionError: Failed to connect to SRVWUFRA0986V\SQLEXPRESS in 15000ms
    at C:\Users\W0024618\Desktop\emea-occupancy-backend\node_modules\mssql\lib\tedious\connection-pool.js:85:17
    at Connection.onConnect (C:\Users\W0024618\Desktop\emea-occupancy-backend\node_modules\tedious\lib\connection.js:849:9)
    at Object.onceWrapper (node:events:633:26)
    at Connection.emit (node:events:518:28)
    at Connection.emit (C:\Users\W0024618\Desktop\emea-occupancy-backend\node_modules\tedious\lib\connection.js:970:18)
    at Connection.connectTimeout (C:\Users\W0024618\Desktop\emea-occupancy-backend\node_modules\tedious\lib\connection.js:1222:10)
    at Timeout._onTimeout (C:\Users\W0024618\Desktop\emea-occupancy-backend\node_modules\tedious\lib\connection.js:1167:12)
    at listOnTimeout (node:internal/timers:588:17)
    at process.processTimers (node:internal/timers:523:7) {
  code: 'ETIMEOUT',
  originalError: ConnectionError: Failed to connect to SRVWUFRA0986V\SQLEXPRESS in 15000ms
      at Connection.connectTimeout (C:\Users\W0024618\Desktop\emea-occupancy-backend\node_modules\tedious\lib\connection.js:1222:26)
      at Timeout._onTimeout (C:\Users\W0024618\Desktop\emea-occupancy-backend\node_modules\tedious\lib\connection.js:1167:12)
      at listOnTimeout (node:internal/timers:588:17)
      at process.processTimers (node:internal/timers:523:7) {
    code: 'ETIMEOUT'
  }
}
PS C:\Users\W0024618\Desktop\emea-occupancy-backend>
